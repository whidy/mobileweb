# ä¸ªäººå°è¯•æ­å»ºä¸€ä¸ªå¿«é€Ÿå¼€å‘ç§»åŠ¨ç«™çš„æ¶å­

### æ­å»ºç¯å¢ƒåŠç›¸å…³é…ç½®

- **webpack 3.x**ï¼Œéœ€è¦loaderåŠè¯´æ˜
- css-loader, style-loader åŠ è½½cssæ–‡ä»¶
- postcss-loader å¯¹cssè¿›è¡Œè½¬æ¢å¤„ç†
- expose-loader æš´éœ²å…¨å±€ä¾‹å¦‚jquery
- url-loader æ ·å¼æ–‡ä»¶å†…çš„å›¾ç‰‡ç­‰èµ„æº
- file-loader å­—ä½“ç­‰èµ„æº

### ä½¿ç”¨åº“

- jquery
- normalize
- [amfe-flexible](https://github.com/amfe/lib-flexible)

### PostCSSç›¸å…³çš„æ’ä»¶

- autoprefixer
- postcss-advanced-variables
- postcss-nested
- postcss-partial-import
- ~~postcss-px2rem~~
- postcss-pxtorem
- postcss-scss
- postcss-sorting
- cssnano
- postcss-property-lookup

- [postcss-adaptive](https://github.com/songsiqi/postcss-adaptive)ï¼ˆè¯¥æ’ä»¶å®é™…ä¸Šä¸pxtoremåŠŸèƒ½ç›¸ä¼¼,ä¼¼ä¹æ˜¯px2remçš„æ”¹è¿›ç‰ˆ,éœ€é…åˆ[lib-flexible](https://github.com/amfe/lib-flexible)è¯¥æ’ä»¶ä¸ºäº†è§£å†³1pxè¾¹æ¡†é—®é¢˜è€Œç”Ÿï¼Œå…¶å®æ˜¯é…åˆç±»åå¯¹dpr2è¿›è¡Œpx/2çš„å¤„ç†ã€‚å¦‚æœéœ€æ±‚ä¸é«˜å¯ä»¥ç›´æ¥é‡‡ç”¨è¯¥æ’ä»¶ï¼Œè€Œæ”¾å¼ƒåŒæ—¶ä½¿ç”¨postcss-pxtoremå’Œpostcss-adaptiveï¼Œæˆ‘ä¹‹æ‰€ä»¥åŒæ—¶ä½¿ç”¨ä¸»è¦æ˜¯å› ä¸ºpostcss-pxtoremçš„`minPixelValue: 6`æ¯”è¾ƒæ–¹ä¾¿ï¼Œä»¥åŠå¯¹äºä¸æƒ³è½¬æ¢çš„pxå¤„ç†çš„è§„åˆ™ä½¿ç”¨éå¸¸ä¾¿æ·ï¼ï¼‰

### è¦è§£å†³ä¸€äº›é—®é¢˜

å¿«é€Ÿå¼€å‘è‡ªé€‚åº”çš„ç§»åŠ¨ç«¯ä¸“é¢˜ç«™ç‚¹æˆ–ç®€å•é¡µé¢

è§£å†³~~å­—ä½“å’Œ~~è¾¹æ¡†ä¸è¿›è¡Œremè½¬æ¢ï¼ˆæ ¹æ®è€ƒç©¶å¹¶æœªæ‰¾åˆ°åˆç†æœ‰æ•ˆçš„è¯æ®è¯æ˜font-sizeå»ºè®®ä½¿ç”¨pxï¼Œä¸ªäººè®¤ä¸ºå¦‚æœremè®¡ç®—åˆç†ä¸åº”è¯¥å­˜åœ¨æ˜æ˜¾çš„é‡å¤§é—®é¢˜ã€‚è‡ªç„¶å°±ä¸éœ€è¦ç”¨åˆ°px2remçš„dpræ‰©å±•è½¬æ¢åŠŸèƒ½äº†ï¼‰

è¯¥åˆ†æ”¯é‡‡ç”¨[postcss-pxtorem](https://github.com/cuth/postcss-pxtorem)é¿å…äº†postcss-nestedæ³¨é‡Šé—®é¢˜,å…·ä½“é…ç½®å¤§è‡´å¦‚ä¸‹

```javascript
require('postcss-pxtorem')({
  rootValue: 75,
  unitPrecision: 5,
  propList: ['*'],
  selectorBlackList: [],
  replace: true,
  mediaQuery: false,
  minPixelValue: 12
})
```

å‡è®¾è®¾è®¡ç¨¿750å®½ï¼Œè¿™é‡Œè®¾ç½®ç®€å•è¯´æ˜ä¸€ä¸‹ï¼ˆæ²¡è¯´çš„æ˜¯æˆ‘è¿˜æ²¡å¼„æ˜ç™½æˆ–è€…æ˜¯ä¸é‡è¦çš„ğŸ˜‚ï¼‰ï¼š

- rootValueä¸º75ï¼Œè¯´æ˜¯å¯¹æ ¹å…ƒç´ å¤§å°è¿›è¡Œè®¾ç½®ã€‚å¯èƒ½ç±»ä¼¼[px2rem](https://www.npmjs.com/package/px2rem)ä¸­çš„remUnitå‚æ•°å§

- unitPrecisionä¸º5ï¼Œèµ·åˆæˆ‘çœŸä¸çŸ¥é“è¿™ä¸ªå®˜æ–¹è¯´çš„*The decimal numbers to allow the REM units to grow to.*æ˜¯å•¥æ„æ€ï¼Œæäº†åŠå¤©æ‰è§‚å¯Ÿå‡ºæ¥ï¼ŒåŸæ¥æ˜¯**è½¬æ¢æˆremåä¿ç•™çš„å°æ•°ç‚¹ä½æ•°**ã€‚ã€‚ã€‚

- propListæ˜¯ä¸€ä¸ªå­˜å‚¨å“ªäº›å°†è¢«è½¬æ¢çš„å±æ€§åˆ—è¡¨ï¼Œè¿™é‡Œè®¾ç½®ä¸º`['*']`å…¨éƒ¨ï¼Œå‡è®¾éœ€è¦ä»…å¯¹è¾¹æ¡†è¿›è¡Œè®¾ç½®ï¼Œå¯ä»¥å†™`['*', '!border*']`æ„æ€æ˜¯æ’é™¤å¸¦æœ‰borderçš„å±æ€§ï¼Œå½“ç„¶è¿™é‡Œä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿè®¸æœ‰æ—¶å€™ä¸æƒ³å¯¹borderå…¶ä»–æ ·å¼å¤„ç†ä¾‹å¦‚`border-radius`æ‰€ä»¥ä¹Ÿä¸æ˜¯å¾ˆå¥½ã€‚

- selectorBlackListåˆ™æ˜¯ä¸€ä¸ªå¯¹cssé€‰æ‹©å™¨è¿›è¡Œè¿‡æ»¤çš„æ•°ç»„ï¼Œæ¯”å¦‚ä½ è®¾ç½®ä¸º`['fs']`ï¼Œé‚£ä¾‹å¦‚`fs-xl`ç±»åï¼Œé‡Œé¢æœ‰å…³pxçš„æ ·å¼å°†ä¸è¢«è½¬æ¢ï¼Œè¿™é‡Œä¹Ÿæ”¯æŒæ­£åˆ™å†™æ³•ã€‚

- minPixelValueæ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„é€‰é¡¹ï¼Œæˆ‘è®¾ç½®äº†12ï¼Œæ„æ€æ˜¯æ‰€æœ‰å°äº12pxçš„æ ·å¼éƒ½ä¸è¢«è½¬æ¢ï¼Œé‚£ä¹ˆborderä¹‹ç±»çš„å±æ€§è‡ªç„¶ä¼šä¿ç•™pxå€¼äº†ã€‚è€Œåˆšæ‰æåˆ°çš„border-radiuså¦‚æœä¸ºäº†åˆ›é€ åœ†å½¢ç­‰ç‰¹æ®Šè¾ƒå¤§åœ†å¼§æ—¶åˆ™è¿˜æ˜¯ä¼šè½¬æ¢æˆremï¼Œæ¥é…åˆå¯¹åº”çš„widthå’Œheightï¼ˆå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ç»§æ‰¿widthæˆ–è€…heightçš„å˜é‡æ¥è®¾ç½®radiusï¼‰ã€‚

  > éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ä¸‹æƒ…å†µå¹¶ä¸ä¼šä¿ç•™ä¸ºpxï¼
  >
  > ```css
  > .test-radius {
  >   width:20px;
  >   height:20px;
  >   border-radius: calc(@width / 2);
  >   background-color:#ccc;
  > }
  > ```
  >
  > æ ¹æ®åå¤æµ‹è¯•ï¼Œcalcè¿ç®—æ˜¯æ¥è‡ªcssnanoæ’ä»¶ï¼Œç„¶è€Œ[cssnano](http://cssnano.co/)æœ‰å¿…è¦æ”¾åœ¨æœ€åæ‰§è¡Œï¼Œæ‰€ä»¥æ— æ³•æ»¡è¶³è®¡ç®—åçš„10pxåœ¨è¿›è¡Œpxtoremè½¬æ¢ï¼Œä¸è¿‡è¿™ç§æƒ…å†µä¹Ÿæ˜¯æ¯”è¾ƒåˆç†çš„ã€‚å‡è®¾widthå’Œheightè½¬æ¢ä¸ºremï¼Œè€Œåœ†è§’æ˜¯pxï¼Œä¸ªäººæ„Ÿè§‰ä¸å¯é¿å…çš„ä¼šé€ æˆåœ†å½¢é”™è¯¯çš„æƒ…å†µï¼ˆæ˜¯å¦æœ‰å¯èƒ½æ”¹åœ†è§’pxå€¼å®é™…ä¸Šæ°¸è¿œå¤§äºè½¬æ¢åçš„remçš„50%ï¼Ÿæœ‰å¾…è€ƒç©¶ï¼ï¼‰ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µæš‚æ—¶å°±ä¸è€ƒè™‘äº†ï¼Œè®©å…¶å•ä½å‡ä¿æŒä¸€è‡´å³å¯ã€‚

  å†™åˆ°è¿™é‡Œæˆ‘åˆé™·å…¥äº†æ²‰æ€ï¼Œå› ä¸ºæœ‰ä¸ªé—®é¢˜ä¸æ˜ç™½äº†ã€‚æ ¹æ®postcss.config.jsé…ç½®cssnanoæ˜¯åœ¨æœ€åé¢ï¼Œpxtoremæ˜¯åœ¨å…¶å‰é¢ï¼Œé‚£ä¹ˆå¦‚ä½•åšåˆ°å¯¹æ­¤æ®µæ ·å¼è½¬æ¢çš„é¡ºåºã€‚

  è¿™æ®µä»£ç åº”è¯¥å…ˆæ˜¯postcss-property-lookupå¯¹@widthè¿›è¡Œå¤„ç†ï¼Œç„¶åè¿›è¡Œcalc(@width / 2)è®¡ç®—ï¼Œæœ€åå¯¹pxæ£€æµ‹è½¬æ¢ï¼Œå†è¿›è¡Œcssnanoå‹ç¼©ã€‚è€Œå®é™…ä¸Šæœ‰ç‚¹è¯¡å¼‚ã€‚**éš¾é“postcss.config.jsä¸­æ’ä»¶çš„æ‰§è¡Œé¡ºåºå¹¶éå•çº¯çš„ä»ä¸Šè€Œä¸‹ï¼**å¸Œæœ›ä¸ä¹…çš„å°†æ¥è¿™ä¸ªç–‘é—®å°†è¢«è§£å†³ï¼Œæˆ–è€…æˆ‘ä¹Ÿæ€€ç–‘postcsså®˜æ–¹æ–‡æ¡£å®é™…æœ‰æŒ‡å‡ºï¼Œåªæ˜¯ä¸ªäººè‹±æ–‡èƒ½åŠ›è¾ƒå·®è¢«æˆ‘å¿½ç•¥æ‰äº†ğŸ˜¥ã€‚

  å¦ä¸€æ–¹é¢ï¼Œå…³äºæ­¤æ®µCSSåœ¨ç”»åœ†ä¸Šæœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„ï¼Œå…¶å®è¿™é‡Œå¦‚æœå†™åœ†ç”¨50%å³å¯ï¼Œæˆ‘å‘ç°æŸäº›æƒ…å†µä¸‹ï¼ˆå¯èƒ½æ˜¯åœ†å½¢å¾ˆå°ï¼‰å¦‚æœæŒ‰ç…§é™¤ä»¥2çš„å†™æ³•è½¬æ¢æˆremä¼¼ä¹ä¸åœ†ï¼Œæ‰€ä»¥åœ¨ç°ä»£å¼€å‘æ¥çœ‹ç§»åŠ¨ç«¯ç”»åœ†å°±50%äº†ï¼æ‰€ä»¥ä¸Šä¾‹ä»…åšæµ‹è¯•å¥½äº†~

  é¢å¤–é˜…è¯»ï¼Œå…³äº[border-radius](https://caniuse.com/#search=border-radius)çš„ä¸€äº›äº‹é¡¹ã€‚

  å¯¹äº†å¿˜äº†è¯´äº†ï¼Œcssæ ·å¼ä»£ç ä¸­å°†pxå†™æˆ`Px`æˆ–è€…`PX`ä»–ä¹Ÿä¸ä¼šè½¬æ¢æˆremçš„~

### é™„åŠ ï¼šå‰æ–‡æåˆ°äº†ä¸€ä¸ªæ’ä»¶postcss-adaptiveè¯´æ˜

åœ¨PostCSSçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘åŠ å…¥äº†è¿™ä¸ªæ’ä»¶å¹¶æ”¾åœ¨äº†postcss-pxtoremçš„åé¢å¼•å…¥ï¼Œè¿™æ ·åœ¨ç¬¬ä¸€æ¬¡è½¬æ¢åï¼Œpostcss-adaptiveçš„é»˜è®¤å‚æ•°å°±ä¸ä¼šå½±å“åˆ°ä¸Šä¸€ä¸ªæ’ä»¶çš„é…ç½®è€Œé€ æˆçš„æ··ä¹±æƒ…å†µã€‚å®é™…ä¸Šå‰é¢ä¹Ÿæåˆ°è¿‡ï¼Œè¿™ä¸ªæ’ä»¶çš„å¤§éƒ¨åˆ†åŠŸèƒ½å’Œpostcss-pxtoremç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå¯¹äºè½¬æ¢è§„åˆ™çš„æ¡ä»¶è¿‡æ»¤ï¼Œè€Œpostcss-pxtoremè¿™ç‚¹æœ‰æå¤§çš„ä¼˜åŠ¿ï¼Œä½¿ç”¨è¿™ä¸ªæ’ä»¶ä¸»è¦æ˜¯è§£å†³retinaå±ï¼ˆiPhone4ä»¥ä¸Šï¼Ÿï¼‰éœ€è¦å¯¹1pxè¾¹æ¡†å¤„ç†ä¸º0.5pxã€‚å…·ä½“æµ‹è¯•å¯ä»¥çœ‹ä¸€ä¸‹DEMOä¸­çš„*pic-txtsç»“æ„*ï¼Œä»¥ä¸‹æ˜¯è¯¥ç»“æ„éƒ¨åˆ†è¯´æ˜ï¼š

> è¿™æ˜¯ä¸€ä¸ªpic-txtsç»“æ„çš„wrapï¼Œå±•ç¤ºå°åœ†è§’è¾¹æ¡†åœ¨ä¸¤ä¸ªrem > px è½¬æ¢æ’ä»¶çš„ä½œç”¨ä¸‹çš„å½±å“å› ä¸ºåœ¨postcss-pxtoremé…ç½®ä¸­çš„minPixelValueè®¾ç½®ä¸º6ï¼Œå½“åœ†è§’ä¸º5pxæ—¶ï¼Œä»–ä¸è¿›è¡Œè½¬æ¢ï¼Œè€Œpostcss-adaptiveå´è¦å¯¹pxå±æ€§è¿›è¡Œæ“ä½œï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çš„ï¼Œåˆç†çš„æ“ä½œæœ‰ä¸¤ç§ï¼š
>
> 1. å°†åœ†è§’å€¼æŒ‰ç…§è®¾è®¡ç¨¿ï¼ˆå‡è®¾è®¾è®¡ç¨¿æ—¶10pxï¼‰è®¾å®šï¼Œå¹¶é‡æ–°è°ƒæ•´postcss-pxtoremé…ç½®ä¸­çš„minPixelValueä¸ºä¸¤å€å®‰å…¨å€¼ï¼Œä¾‹å¦‚12
>
> 2. å°†åœ†è§’5pxå€¼æ”¹æˆpostcss-pxtoremä¸å¤„ç†çš„è§„åˆ™ä¾‹å¦‚5PXï¼Œé€šè¿‡å®éªŒï¼Œå‘ç°postcss-adaptiveå¹¶ä¸ä¼šå¤„ç†è¯¥å±æ€§

### ç›´è§†å­¦ä¹ PostCSSè¿‡ç¨‹ä¸­é‡åˆ°çš„å‘åŠå¡«å‘

å…¶ä»–

###è¿è¡Œæ–¹æ³•

è¯·ä¾æ¬¡åˆ†å¸ƒæ‰§è¡Œ

```javascript
npm install
npm run start
npm run build:dev
```

æ‰“å¼€æµè§ˆå™¨è®¿é—®http://localhost:9000/src/